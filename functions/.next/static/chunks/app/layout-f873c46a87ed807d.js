(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{344:(e,r,t)=>{"use strict";t.d(r,{CA:()=>l,_h:()=>s,y4:()=>o});var n=t(6203),a=t(1304);let s=async(e,r)=>{try{if(!a.j2)throw Error("인증 인스턴스가 초기화되지 않았습니다");let t=await (0,n.x9)(a.j2,e,r);return{success:!0,user:t.user}}catch(e){return{success:!1,error:e.message}}},o=async()=>{try{if(!a.j2)throw Error("인증 인스턴스가 초기화되지 않았습니다");return await (0,n.CI)(a.j2),{success:!0}}catch(e){return{success:!1,error:e.message}}},l=e=>a.j2?(0,n.hg)(a.j2,e):()=>{}},650:(e,r,t)=>{"use strict";t.d(r,{A:()=>i,AuthProvider:()=>c});var n=t(5155),a=t(2115),s=t(344),o=t(2743);let l=(0,a.createContext)();function c(e){let{children:r}=e,[t,c]=(0,a.useState)(null),[i,u]=(0,a.useState)(null),[d,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{try{let e=(0,s.CA)(async e=>{if(e)try{let r=await (0,o.gL)(e.uid);c(e),u(r)}catch(r){console.error("사용자 데이터 가져오기 오류:",r),c(e),u(null)}else c(null),u(null);h(!1)});return()=>e&&e()}catch(e){return console.error("인증 상태 리스너 설정 중 오류 발생:",e),h(!1),()=>{}}},[]);let y={user:t,userData:i,loading:d,isAdmin:(null==i?void 0:i.role)==="admin",isTeacher:(null==i?void 0:i.role)==="teacher",isStudent:(null==i?void 0:i.role)==="student",hasRole:e=>!!i&&("admin"===e?"admin"===i.role:"teacher"===e?"admin"===i.role||"teacher"===i.role:"student"===e&&("admin"===i.role||"teacher"===i.role||"student"===i.role))};return(0,n.jsx)(l.Provider,{value:y,children:r})}function i(){return(0,a.useContext)(l)}},1304:(e,r,t)=>{"use strict";t.d(r,{db:()=>c,j2:()=>i});var n=t(3915),a=t(5317),s=t(858),o=t(6203);let l=0===(0,n.Dk)().length?(0,n.Wp)({apiKey:"AIzaSyARLoCaF3g_z_RcZdU7yp19rgt7YSghGWw",authDomain:"growingbeans-3aa62.firebaseapp.com",projectId:"growingbeans-3aa62",storageBucket:"growingbeans-3aa62.firebasestorage.app",messagingSenderId:"498344379382",appId:"1:498344379382:web:684c82f8f8ab7084a67dd7",measurementId:"G-NJD4T1QKKQ"}):(0,n.Dk)().length>0?(0,n.Dk)()[0]:null,c=l?(0,a.aU)(l):null;l&&(0,s.c7)(l);let i=l?(0,o.xI)(l):null},2570:(e,r,t)=>{Promise.resolve().then(t.bind(t,6856)),Promise.resolve().then(t.bind(t,650)),Promise.resolve().then(t.t.bind(t,9324,23)),Promise.resolve().then(t.t.bind(t,6874,23)),Promise.resolve().then(t.t.bind(t,7656,23))},2743:(e,r,t)=>{"use strict";t.d(r,{Ln:()=>h,Nj:()=>d,a9:()=>l,gL:()=>c,nd:()=>i,xB:()=>u});var n=t(1304),a=t(5317);let s=()=>{if(!n.db)throw Error("Firestore가 초기화되지 않았습니다. 클라이언트 사이드에서만 이 함수를 호출해주세요.");return n.db},o=()=>{let e=s();return(0,a.rJ)(e,"videos")};async function l(e,r){try{let t=s(),n=(0,a.H9)(t,"users",e),o={...r,createdAt:(0,a.O5)(),updatedAt:(0,a.O5)()};return await (0,a.BN)(n,o),{uid:e,...o}}catch(e){throw console.error("사용자 데이터 생성 오류:",e),e}}async function c(e){try{let r=s(),t=(0,a.H9)(r,"users",e),n=await (0,a.x7)(t);if(n.exists())return{uid:n.id,...n.data()};return null}catch(e){throw console.error("사용자 데이터 불러오기 오류:",e),e}}async function i(e,r){try{let t=o(),n=(0,a.P)(t,(0,a._M)("levelId","==",e),(0,a._M)("quarterId","==",r),(0,a._M)("type","==","library")),s=await (0,a.GG)(n),l=[];return s.forEach(e=>{l.push({id:e.id,...e.data()})}),l}catch(e){throw console.error("분기별 영상 불러오기 오류:",e),e}}async function u(e,r,t,n){try{let s=o(),l=(0,a.P)(s,(0,a._M)("levelId","==",e),(0,a._M)("quarterId","==",r),(0,a._M)("monthId","==",t),(0,a._M)("weekId","==",n),(0,a._M)("type","==","lesson")),c=await (0,a.GG)(l),i=[];return c.forEach(e=>{i.push({id:e.id,...e.data()})}),i}catch(e){throw console.error("주차별 영상 불러오기 오류:",e),e}}async function d(e){try{let r=o(),t={...e,createdAt:(0,a.O5)(),updatedAt:(0,a.O5)()};return{id:(await (0,a.gS)(r,t)).id,...t}}catch(e){throw console.error("비디오 추가 오류:",e),e}}async function h(e){try{let r=s(),t=(0,a.H9)(r,"videos",e);return await (0,a.kd)(t),{success:!0,id:e}}catch(e){throw console.error("비디오 삭제 오류:",e),e}}},6856:(e,r,t)=>{"use strict";t.d(r,{default:()=>l});var n=t(5155),a=t(6874),s=t.n(a),o=t(650);function l(){let{user:e,loading:r}=(0,o.A)();return r?null:(0,n.jsx)(s(),{href:e?"/admin":"/login",className:"py-2 px-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:e?"관리자 페이지":"관리자 로그인"})}},7656:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_d65c78"}},9324:()=>{}},e=>{var r=r=>e(e.s=r);e.O(0,[721,992,118,874,288,441,684,358],()=>r(2570)),_N_E=e.O()}]);