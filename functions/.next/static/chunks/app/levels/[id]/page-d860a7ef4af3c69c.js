(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[258],{344:(e,t,r)=>{"use strict";r.d(t,{CA:()=>l,_h:()=>o,y4:()=>a});var i=r(6203),s=r(1304);let o=async(e,t)=>{try{if(!s.j2)throw Error("인증 인스턴스가 초기화되지 않았습니다");let r=await (0,i.x9)(s.j2,e,t);return{success:!0,user:r.user}}catch(e){return{success:!1,error:e.message}}},a=async()=>{try{if(!s.j2)throw Error("인증 인스턴스가 초기화되지 않았습니다");return await (0,i.CI)(s.j2),{success:!0}}catch(e){return{success:!1,error:e.message}}},l=e=>s.j2?(0,i.hg)(s.j2,e):()=>{}},650:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,AuthProvider:()=>c});var i=r(5155),s=r(2115),o=r(344),a=r(2743);let l=(0,s.createContext)();function c(e){let{children:t}=e,[r,c]=(0,s.useState)(null),[n,d]=(0,s.useState)(null),[u,h]=(0,s.useState)(!0);(0,s.useEffect)(()=>{try{let e=(0,o.CA)(async e=>{if(e)try{let t=await (0,a.gL)(e.uid);c(e),d(t)}catch(t){console.error("사용자 데이터 가져오기 오류:",t),c(e),d(null)}else c(null),d(null);h(!1)});return()=>e&&e()}catch(e){return console.error("인증 상태 리스너 설정 중 오류 발생:",e),h(!1),()=>{}}},[]);let m={user:r,userData:n,loading:u,isAdmin:(null==n?void 0:n.role)==="admin",isTeacher:(null==n?void 0:n.role)==="teacher",isStudent:(null==n?void 0:n.role)==="student",hasRole:e=>!!n&&("admin"===e?"admin"===n.role:"teacher"===e?"admin"===n.role||"teacher"===n.role:"student"===e&&("admin"===n.role||"teacher"===n.role||"student"===n.role))};return(0,i.jsx)(l.Provider,{value:m,children:t})}function n(){return(0,s.useContext)(l)}},1304:(e,t,r)=>{"use strict";r.d(t,{db:()=>c,j2:()=>n});var i=r(3915),s=r(5317),o=r(858),a=r(6203);let l=0===(0,i.Dk)().length?(0,i.Wp)({apiKey:"AIzaSyARLoCaF3g_z_RcZdU7yp19rgt7YSghGWw",authDomain:"growingbeans-3aa62.firebaseapp.com",projectId:"growingbeans-3aa62",storageBucket:"growingbeans-3aa62.firebasestorage.app",messagingSenderId:"498344379382",appId:"1:498344379382:web:684c82f8f8ab7084a67dd7",measurementId:"G-NJD4T1QKKQ"}):(0,i.Dk)().length>0?(0,i.Dk)()[0]:null,c=l?(0,s.aU)(l):null;l&&(0,o.c7)(l);let n=l?(0,a.xI)(l):null},2743:(e,t,r)=>{"use strict";r.d(t,{Ln:()=>x,Nj:()=>h,Nq:()=>p,a9:()=>c,gL:()=>n,h5:()=>m,nd:()=>d,x0:()=>b,xB:()=>u});var i=r(1304),s=r(5317);let o=()=>{if(!i.db)throw Error("Firestore가 초기화되지 않았습니다. 클라이언트 사이드에서만 이 함수를 호출해주세요.");return i.db},a=()=>{let e=o();return(0,s.rJ)(e,"videos")},l=()=>{let e=o();return(0,s.rJ)(e,"users")};async function c(e,t){try{let r=o(),i=(0,s.H9)(r,"users",e),a={...t,createdAt:(0,s.O5)(),updatedAt:(0,s.O5)()};return await (0,s.BN)(i,a),{uid:e,...a}}catch(e){throw console.error("사용자 데이터 생성 오류:",e),e}}async function n(e){try{let t=o(),r=(0,s.H9)(t,"users",e),i=await (0,s.x7)(r);if(i.exists())return{uid:i.id,...i.data()};return null}catch(e){throw console.error("사용자 데이터 불러오기 오류:",e),e}}async function d(e,t){try{let r=a(),i=(0,s.P)(r,(0,s._M)("levelId","==",e),(0,s._M)("quarterId","==",t),(0,s._M)("type","==","library")),o=await (0,s.GG)(i),l=[];return o.forEach(e=>{l.push({id:e.id,...e.data()})}),l.sort((e,t)=>e.title.localeCompare(t.title,"ko"))}catch(e){throw console.error("분기별 영상 불러오기 오류:",e),e}}async function u(e,t,r,i){try{let o=a(),l=(0,s.P)(o,(0,s._M)("levelId","==",e),(0,s._M)("quarterId","==",t),(0,s._M)("monthId","==",r),(0,s._M)("weekId","==",i),(0,s._M)("type","==","lesson")),c=await (0,s.GG)(l),n=[];return c.forEach(e=>{n.push({id:e.id,...e.data()})}),n.sort((e,t)=>e.title.localeCompare(t.title,"ko"))}catch(e){throw console.error("주차별 영상 불러오기 오류:",e),e}}async function h(e){try{let t=a(),r={...e,createdAt:(0,s.O5)(),updatedAt:(0,s.O5)()};return{id:(await (0,s.gS)(t,r)).id,...r}}catch(e){throw console.error("비디오 추가 오류:",e),e}}async function m(e,t){try{let r=o(),i=(0,s.H9)(r,"videos",e);return await (0,s.mZ)(i,{...t,updatedAt:(0,s.O5)()}),{id:e,...t}}catch(e){throw console.error("비디오 업데이트 오류:",e),e}}async function x(e){try{let t=o(),r=(0,s.H9)(t,"videos",e);return await (0,s.kd)(r),{success:!0,id:e}}catch(e){throw console.error("비디오 삭제 오류:",e),e}}async function b(){try{let e=l(),t=(0,s.P)(e,(0,s._M)("role","==","teacher"),(0,s.My)("createdAt","desc"));return(await (0,s.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("선생님 목록 가져오기 오류:",e),e}}async function p(e){try{let t=o(),r=(0,s.H9)(t,"users",e);await (0,s.kd)(r)}catch(e){throw console.error("사용자 데이터 삭제 오류:",e),e}}},5695:(e,t,r)=>{"use strict";var i=r(8999);r.o(i,"useParams")&&r.d(t,{useParams:function(){return i.useParams}}),r.o(i,"useRouter")&&r.d(t,{useRouter:function(){return i.useRouter}})},6934:(e,t,r)=>{Promise.resolve().then(r.bind(r,9655))},9655:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var i=r(5155),s=r(5695),o=r(6874),a=r.n(o),l=r(2115),c=r(2743),n=r(650);let d={1:"bg-yellow-100",2:"bg-green-100",3:"bg-blue-100",4:"bg-purple-100",5:"bg-pink-100",6:"bg-red-100"},u={1:"\uD83D\uDC30",2:"\uD83D\uDC3B",3:"\uD83E\uDD8A",4:"\uD83E\uDD81",5:"\uD83D\uDC2F",6:"\uD83E\uDD84"},h=[{id:"q1",title:"1분기",months:[{id:"m1",title:"1분기 첫번째 달",icon:"\uD83D\uDCC5"},{id:"m2",title:"1분기 두번째 달",icon:"\uD83D\uDCC5"},{id:"m3",title:"1분기 세번째 달",icon:"\uD83D\uDCC5"}],videoLibrary:{id:"videos",title:"1분기 영상 자료실",icon:"\uD83C\uDFA5"}},{id:"q2",title:"2분기",months:[{id:"m4",title:"2분기 첫번째 달",icon:"\uD83D\uDCC5"},{id:"m5",title:"2분기 두번째 달",icon:"\uD83D\uDCC5"},{id:"m6",title:"2분기 세번째 달",icon:"\uD83D\uDCC5"}],videoLibrary:{id:"videos",title:"2분기 영상 자료실",icon:"\uD83C\uDFA5"}},{id:"q3",title:"3분기",months:[{id:"m7",title:"3분기 첫번째 달",icon:"\uD83D\uDCC5"},{id:"m8",title:"3분기 두번째 달",icon:"\uD83D\uDCC5"},{id:"m9",title:"3분기 세번째 달",icon:"\uD83D\uDCC5"}],videoLibrary:{id:"videos",title:"3분기 영상 자료실",icon:"\uD83C\uDFA5"}},{id:"q4",title:"4분기",months:[{id:"m10",title:"4분기 첫번째 달",icon:"\uD83D\uDCC5"},{id:"m11",title:"4분기 두번째 달",icon:"\uD83D\uDCC5"},{id:"m12",title:"4분기 세번째 달",icon:"\uD83D\uDCC5"}],videoLibrary:{id:"videos",title:"4분기 영상 자료실",icon:"\uD83C\uDFA5"}}];function m(){let e=(0,s.useParams)(),[t,r]=(0,l.useState)({q1:!1,q2:!1,q3:!1,q4:!1}),[o,m]=(0,l.useState)(!0),{user:x,isAdmin:b,isTeacher:p}=(0,n.A)(),g=b||p;return(0,l.useEffect)(()=>{!async function(){try{m(!0);let t={};for(let r of h){let i=await (0,c.nd)(e.id,r.id),s=g?i:i.filter(e=>"library"===e.type);t[r.id]=s.length>0}r(t),m(!1)}catch(e){console.error("영상 데이터 확인 오류:",e),m(!1)}}()},[e.id,g]),(0,i.jsx)("main",{className:"min-h-screen p-8 bg-gradient-to-b from-blue-50 to-purple-50",children:(0,i.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsxs)(a(),{href:"/",className:"inline-flex items-center text-purple-600 hover:text-purple-700 font-comic",children:[(0,i.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"홈으로 돌아가기"]})}),(0,i.jsxs)("div",{className:"".concat(d[e.id]," rounded-2xl p-6 mb-8 border-4 border-white shadow-lg"),children:[(0,i.jsx)("div",{className:"text-6xl mb-4",children:u[e.id]}),(0,i.jsxs)("h1",{className:"text-4xl font-bold text-gray-800 mb-2 font-comic",children:["레벨 ",e.id]}),(0,i.jsx)("p",{className:"text-xl text-gray-600 font-comic",children:"즐겁게 영어를 배워봐요!"})]}),o?(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("div",{className:"inline-block animate-bounce text-5xl mb-4",children:"\uD83D\uDD04"}),(0,i.jsx)("p",{className:"text-gray-600 font-comic",children:"데이터를 불러오고 있어요..."})]}):(0,i.jsx)("div",{className:"space-y-8",children:h.map(r=>(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-6 border-4 border-white shadow-lg",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold text-purple-600 mb-6 font-comic",children:r.title}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.months.map(t=>(0,i.jsx)(a(),{href:"/levels/".concat(e.id,"/").concat(r.id,"/").concat(t.id),className:"block",children:(0,i.jsxs)("div",{className:"bg-purple-50 rounded-xl p-4 border-2 border-purple-100 hover:border-purple-300 transition-colors",children:[(0,i.jsx)("div",{className:"text-3xl mb-2",children:t.icon}),(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-800 font-comic",children:t.title})]})},t.id)),t[r.id]?(0,i.jsx)(a(),{href:"/levels/".concat(e.id,"/").concat(r.id,"/videos"),className:"block",children:(0,i.jsxs)("div",{className:"bg-purple-50 rounded-xl p-4 border-2 border-purple-100 hover:border-purple-300 transition-colors",children:[(0,i.jsx)("div",{className:"text-3xl mb-2",children:r.videoLibrary.icon}),(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-800 font-comic",children:r.videoLibrary.title})]})}):(0,i.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border-2 border-gray-100",children:[(0,i.jsx)("div",{className:"text-3xl mb-2 text-gray-400",children:"\uD83D\uDCED"}),(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-400 font-comic",children:"영상 자료 준비 중"}),(0,i.jsx)("p",{className:"text-sm text-gray-400 font-comic",children:"아직 영상 자료가 없어요"})]})]})]},r.id))})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,118,288,874,441,684,358],()=>t(6934)),_N_E=e.O()}]);