(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[708],{1362:(e,l,t)=>{Promise.resolve().then(t.bind(t,8415))},8415:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>x});var s=t(5155),r=t(5695),a=t(6874),i=t.n(a),n=t(2115),c=t(2743),d=t(650),o=t(8273);let m={q1:"1분기",q2:"2분기",q3:"3분기",q4:"4분기"};function x(){let{id:e,quarter:l}=(0,r.useParams)(),[t,a]=(0,n.useState)([]),[x,h]=(0,n.useState)(!0),[u,p]=(0,n.useState)(null),{isAdmin:b,isTeacher:v}=(0,d.A)(),g=b||v,[j,f]=(0,n.useState)(0),N=(0,n.useCallback)(async()=>{try{h(!0),p(null);let t=await (0,c.nd)(e,l);if(console.log("불러온 비디오 데이터:",t.length),Array.isArray(t)&&t.length>0){let e=t.filter(e=>e&&e.id&&e.videoUrl&&"string"==typeof e.videoUrl&&""!==e.videoUrl.trim());a(e),0===e.length&&console.warn("유효한 비디오 데이터가 없습니다")}else console.warn("비디오 데이터가 없거나 배열이 아닙니다");h(!1)}catch(e){console.error("영상 자료실 데이터 불러오기 오류:",e),p("데이터를 불러오는 중 오류가 발생했습니다."),h(!1)}},[e,l]);(0,n.useEffect)(()=>{N()},[N,j]);let w=(0,n.useCallback)(()=>{p(null),f(e=>e+1)},[]),y=(0,n.useCallback)((e,l)=>{let t=e.replace(".m3u8",".mp4").replace("/hls/","/"),s=document.createElement("a");s.href=t,s.download="".concat(l,".mp4"),s.target="_blank",document.body.appendChild(s),s.click(),document.body.removeChild(s)},[]);return(0,s.jsx)("main",{className:"min-h-screen p-8 bg-gradient-to-b from-blue-50 to-purple-50",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)(i(),{href:"/levels/".concat(e),className:"inline-flex items-center text-purple-600 hover:text-purple-700 font-comic",children:[(0,s.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"레벨 ",e,"로 돌아가기"]})}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 mb-8 border-4 border-white shadow-lg",children:[(0,s.jsxs)("h1",{className:"text-4xl font-bold text-purple-600 mb-4 font-comic",children:[m[l]," 영상 자료실"]}),(0,s.jsx)("p",{className:"text-xl text-gray-600 font-comic",children:"영상을 보면서 즐겁게 배워보아요!"}),(0,s.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:[(0,s.jsx)("p",{children:"* 동영상은 재생 버튼을 눌러야 로드됩니다"}),(0,s.jsx)("p",{children:"* 동영상이 보이지 않으면 '다시 시도' 버튼을 클릭해보세요"})]})]}),x?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"inline-block animate-bounce text-5xl mb-4",children:"\uD83D\uDD04"}),(0,s.jsx)("p",{className:"text-gray-600 font-comic",children:"영상을 불러오고 있어요..."})]}):u?(0,s.jsxs)("div",{className:"text-center py-12 bg-white rounded-2xl p-6 border-4 border-white shadow-lg",children:[(0,s.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDE15"}),(0,s.jsx)("p",{className:"text-gray-600 font-comic",children:u}),(0,s.jsx)("p",{className:"text-gray-600 font-comic mt-2",children:"잠시 후 다시 시도해주세요."}),(0,s.jsx)("button",{onClick:w,className:"mt-4 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-comic transition duration-200",children:"다시 시도하기"})]}):t.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((e,l)=>(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-4 border-4 border-white shadow-lg transform hover:scale-105 transition-transform duration-300",children:[(0,s.jsx)("div",{className:"aspect-video mb-4 rounded-xl overflow-hidden border-4 border-purple-100 relative video-container","data-video-id":e.id||l,children:(0,s.jsx)(o.A,{videoUrl:e.videoUrl,thumbnail:e.thumbnail,videoId:l+1})}),(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2 font-comic",children:e.title}),(0,s.jsx)("p",{className:"text-gray-600 mb-2 font-comic",children:e.description})]}),g&&(0,s.jsxs)("button",{onClick:()=>y(e.videoUrl,e.title),className:"flex items-center bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg transition duration-200",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"다운로드"]})]})]},e.id||l))}):(0,s.jsxs)("div",{className:"text-center py-12 bg-white rounded-2xl p-8 border-4 border-white shadow-lg",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCED"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-600 mb-4 font-comic",children:"아직 영상 자료가 없어요"}),(0,s.jsxs)("p",{className:"text-gray-500 font-comic mb-2",children:[m[l]," 영상 자료를 준비 중이에요."]}),(0,s.jsx)("p",{className:"text-gray-500 font-comic",children:"조금만 기다려주세요!"})]})]})})}}},e=>{var l=l=>e(e.s=l);e.O(0,[992,118,288,874,280,441,684,358],()=>l(1362)),_N_E=e.O()}]);