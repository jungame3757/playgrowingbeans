(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{344:(e,t,r)=>{"use strict";r.d(t,{CA:()=>l,_h:()=>n,y4:()=>c});var s=r(6203),a=r(1304);let n=async(e,t)=>{try{if(!a.j2)throw Error("인증 인스턴스가 초기화되지 않았습니다");let r=await (0,s.x9)(a.j2,e,t);return{success:!0,user:r.user}}catch(e){return{success:!1,error:e.message}}},c=async()=>{try{if(!a.j2)throw Error("인증 인스턴스가 초기화되지 않았습니다");return await (0,s.CI)(a.j2),{success:!0}}catch(e){return{success:!1,error:e.message}}},l=e=>a.j2?(0,s.hg)(a.j2,e):()=>{}},650:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,AuthProvider:()=>o});var s=r(5155),a=r(2115),n=r(344),c=r(2743);let l=(0,a.createContext)();function o(e){let{children:t}=e,[r,o]=(0,a.useState)(null),[i,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{try{let e=(0,n.CA)(async e=>{if(e)try{let t=await (0,c.gL)(e.uid);o(e),d(t)}catch(t){console.error("사용자 데이터 가져오기 오류:",t),o(e),d(null)}else o(null),d(null);h(!1)});return()=>e&&e()}catch(e){return console.error("인증 상태 리스너 설정 중 오류 발생:",e),h(!1),()=>{}}},[]);let m={user:r,userData:i,loading:u,isAdmin:(null==i?void 0:i.role)==="admin",isTeacher:(null==i?void 0:i.role)==="teacher",isStudent:(null==i?void 0:i.role)==="student",hasRole:e=>!!i&&("admin"===e?"admin"===i.role:"teacher"===e?"admin"===i.role||"teacher"===i.role:"student"===e&&("admin"===i.role||"teacher"===i.role||"student"===i.role))};return(0,s.jsx)(l.Provider,{value:m,children:t})}function i(){return(0,a.useContext)(l)}},1304:(e,t,r)=>{"use strict";r.d(t,{db:()=>o,j2:()=>i});var s=r(3915),a=r(5317),n=r(858),c=r(6203);let l=0===(0,s.Dk)().length?(0,s.Wp)({apiKey:"AIzaSyARLoCaF3g_z_RcZdU7yp19rgt7YSghGWw",authDomain:"growingbeans-3aa62.firebaseapp.com",projectId:"growingbeans-3aa62",storageBucket:"growingbeans-3aa62.firebasestorage.app",messagingSenderId:"498344379382",appId:"1:498344379382:web:684c82f8f8ab7084a67dd7",measurementId:"G-NJD4T1QKKQ"}):(0,s.Dk)().length>0?(0,s.Dk)()[0]:null,o=l?(0,a.aU)(l):null;l&&(0,n.c7)(l);let i=l?(0,c.xI)(l):null},2743:(e,t,r)=>{"use strict";r.d(t,{Ln:()=>x,Nj:()=>h,Nq:()=>f,a9:()=>o,gL:()=>i,h5:()=>m,nd:()=>d,x0:()=>p,xB:()=>u});var s=r(1304),a=r(5317);let n=()=>{if(!s.db)throw Error("Firestore가 초기화되지 않았습니다. 클라이언트 사이드에서만 이 함수를 호출해주세요.");return s.db},c=()=>{let e=n();return(0,a.rJ)(e,"videos")},l=()=>{let e=n();return(0,a.rJ)(e,"users")};async function o(e,t){try{let r=n(),s=(0,a.H9)(r,"users",e),c={...t,createdAt:(0,a.O5)(),updatedAt:(0,a.O5)()};return await (0,a.BN)(s,c),{uid:e,...c}}catch(e){throw console.error("사용자 데이터 생성 오류:",e),e}}async function i(e){try{let t=n(),r=(0,a.H9)(t,"users",e),s=await (0,a.x7)(r);if(s.exists())return{uid:s.id,...s.data()};return null}catch(e){throw console.error("사용자 데이터 불러오기 오류:",e),e}}async function d(e,t){try{let r=c(),s=(0,a.P)(r,(0,a._M)("levelId","==",e),(0,a._M)("quarterId","==",t),(0,a._M)("type","==","library")),n=await (0,a.GG)(s),l=[];return n.forEach(e=>{l.push({id:e.id,...e.data()})}),l.sort((e,t)=>e.title.localeCompare(t.title,"ko"))}catch(e){throw console.error("분기별 영상 불러오기 오류:",e),e}}async function u(e,t,r,s){try{let n=c(),l=(0,a.P)(n,(0,a._M)("levelId","==",e),(0,a._M)("quarterId","==",t),(0,a._M)("monthId","==",r),(0,a._M)("weekId","==",s),(0,a._M)("type","==","lesson")),o=await (0,a.GG)(l),i=[];return o.forEach(e=>{i.push({id:e.id,...e.data()})}),i.sort((e,t)=>e.title.localeCompare(t.title,"ko"))}catch(e){throw console.error("주차별 영상 불러오기 오류:",e),e}}async function h(e){try{let t=c(),r={...e,createdAt:(0,a.O5)(),updatedAt:(0,a.O5)()};return{id:(await (0,a.gS)(t,r)).id,...r}}catch(e){throw console.error("비디오 추가 오류:",e),e}}async function m(e,t){try{let r=n(),s=(0,a.H9)(r,"videos",e);return await (0,a.mZ)(s,{...t,updatedAt:(0,a.O5)()}),{id:e,...t}}catch(e){throw console.error("비디오 업데이트 오류:",e),e}}async function x(e){try{let t=n(),r=(0,a.H9)(t,"videos",e);return await (0,a.kd)(r),{success:!0,id:e}}catch(e){throw console.error("비디오 삭제 오류:",e),e}}async function p(){try{let e=l(),t=(0,a.P)(e,(0,a._M)("role","==","teacher"),(0,a.My)("createdAt","desc"));return(await (0,a.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("선생님 목록 가져오기 오류:",e),e}}async function f(e){try{let t=n(),r=(0,a.H9)(t,"users",e);await (0,a.kd)(r)}catch(e){throw console.error("사용자 데이터 삭제 오류:",e),e}}},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},6260:(e,t,r)=>{Promise.resolve().then(r.bind(r,8509))},8509:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(5155),a=r(5695),n=r(6874),c=r.n(n),l=r(2115),o=r(2743),i=r(650);let d={m1:"1분기 첫번째 달",m2:"1분기 두번째 달",m3:"1분기 세번째 달",m4:"2분기 첫번째 달",m5:"2분기 두번째 달",m6:"2분기 세번째 달",m7:"3분기 첫번째 달",m8:"3분기 두번째 달",m9:"3분기 세번째 달",m10:"4분기 첫번째 달",m11:"4분기 두번째 달",m12:"4분기 세번째 달"},u=[{id:"w1",title:"1주차",icon:"\uD83D\uDCC5"},{id:"w2",title:"2주차",icon:"\uD83D\uDCC5"},{id:"w3",title:"3주차",icon:"\uD83D\uDCC5"},{id:"w4",title:"4주차",icon:"\uD83D\uDCC5"}];function h(){let{id:e,quarter:t,month:r}=(0,a.useParams)(),[n,h]=(0,l.useState)({w1:!1,w2:!1,w3:!1,w4:!1}),[m,x]=(0,l.useState)(!0),{user:p,isAdmin:f,isTeacher:w}=(0,i.A)(),b=f||w;return((0,l.useEffect)(()=>{!async function(){try{x(!0);let s={};for(let a of u){let n=await (0,o.xB)(e,t,r,a.id),c=b?n:n.filter(e=>"library"===e.type);s[a.id]=c.length>0}h(s),x(!1)}catch(e){console.error("주차별 영상 데이터 확인 오류:",e),x(!1)}}()},[e,t,r,b]),b)?(0,s.jsx)("main",{className:"min-h-screen p-8 bg-gradient-to-b from-blue-50 to-purple-50",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)(c(),{href:"/levels/".concat(e),className:"inline-flex items-center text-purple-600 hover:text-purple-700 font-comic",children:[(0,s.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"레벨 ",e,"로 돌아가기"]})}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 mb-8 border-4 border-white shadow-lg",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-purple-600 mb-4 font-comic",children:d[r]}),(0,s.jsx)("p",{className:"text-xl text-gray-600 font-comic",children:"함께 영어를 배워봐요!"})]}),m?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"inline-block animate-bounce text-5xl mb-4",children:"\uD83D\uDD04"}),(0,s.jsx)("p",{className:"text-gray-600 font-comic",children:"데이터를 불러오고 있어요..."})]}):(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.map(a=>n[a.id]&&(0,s.jsx)(c(),{href:"/levels/".concat(e,"/").concat(t,"/").concat(r,"/").concat(a.id),className:"block",children:(0,s.jsx)("div",{className:"bg-white rounded-2xl p-6 border-4 border-white shadow-lg transform hover:scale-105 transition-transform duration-300",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-4xl mr-4",children:a.icon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 font-comic",children:a.title}),(0,s.jsx)("p",{className:"text-gray-600 font-comic",children:"이번 주차 수업을 확인해보세요!"})]})]})})},a.id)),!Object.values(n).some(e=>e)&&(0,s.jsxs)("div",{className:"col-span-1 md:col-span-2 bg-white rounded-2xl p-6 border-4 border-white shadow-lg text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCED"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-600 mb-2 font-comic",children:"아직 영상 자료가 없어요"}),(0,s.jsx)("p",{className:"text-gray-500 font-comic",children:"준비 중이니 조금만 기다려주세요!"})]})]})]})}):(0,s.jsx)("main",{className:"min-h-screen p-8 bg-gradient-to-b from-blue-50 to-purple-50",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)(c(),{href:"/levels/".concat(e),className:"inline-flex items-center text-purple-600 hover:text-purple-700 font-comic",children:[(0,s.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"레벨 ",e,"로 돌아가기"]})}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 border-4 border-white shadow-lg text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD12"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-600 mb-2 font-comic",children:"접근 권한이 없습니다"}),(0,s.jsx)("p",{className:"text-gray-500 font-comic",children:"이 페이지는 선생님과 관리자만 접근할 수 있습니다."}),!p&&(0,s.jsx)(c(),{href:"/login",className:"mt-4 inline-block bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:"로그인하기"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,118,288,874,441,684,358],()=>t(6260)),_N_E=e.O()}]);