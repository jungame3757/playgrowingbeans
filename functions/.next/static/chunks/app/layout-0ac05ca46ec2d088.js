(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{344:(e,r,t)=>{"use strict";t.d(r,{CA:()=>l,_h:()=>o,y4:()=>s});var a=t(6203),n=t(1304);let o=async(e,r)=>{try{if(!n.j2)throw Error("인증 인스턴스가 초기화되지 않았습니다");let t=await (0,a.x9)(n.j2,e,r);return{success:!0,user:t.user}}catch(e){return{success:!1,error:e.message}}},s=async()=>{try{if(!n.j2)throw Error("인증 인스턴스가 초기화되지 않았습니다");return await (0,a.CI)(n.j2),{success:!0}}catch(e){return{success:!1,error:e.message}}},l=e=>n.j2?(0,a.hg)(n.j2,e):()=>{}},650:(e,r,t)=>{"use strict";t.d(r,{A:()=>i,AuthProvider:()=>c});var a=t(5155),n=t(2115),o=t(344),s=t(2743);let l=(0,n.createContext)();function c(e){let{children:r}=e,[t,c]=(0,n.useState)(null),[i,u]=(0,n.useState)(null),[d,h]=(0,n.useState)(!0);(0,n.useEffect)(()=>{try{let e=(0,o.CA)(async e=>{if(e)try{let r=await (0,s.gL)(e.uid);c(e),u(r)}catch(r){console.error("사용자 데이터 가져오기 오류:",r),c(e),u(null)}else c(null),u(null);h(!1)});return()=>e&&e()}catch(e){return console.error("인증 상태 리스너 설정 중 오류 발생:",e),h(!1),()=>{}}},[]);let y={user:t,userData:i,loading:d,isAdmin:(null==i?void 0:i.role)==="admin",isTeacher:(null==i?void 0:i.role)==="teacher",isStudent:(null==i?void 0:i.role)==="student",hasRole:e=>!!i&&("admin"===e?"admin"===i.role:"teacher"===e?"admin"===i.role||"teacher"===i.role:"student"===e&&("admin"===i.role||"teacher"===i.role||"student"===i.role))};return(0,a.jsx)(l.Provider,{value:y,children:r})}function i(){return(0,n.useContext)(l)}},1304:(e,r,t)=>{"use strict";t.d(r,{db:()=>c,j2:()=>i});var a=t(3915),n=t(5317),o=t(858),s=t(6203);let l=0===(0,a.Dk)().length?(0,a.Wp)({apiKey:"AIzaSyARLoCaF3g_z_RcZdU7yp19rgt7YSghGWw",authDomain:"growingbeans-3aa62.firebaseapp.com",projectId:"growingbeans-3aa62",storageBucket:"growingbeans-3aa62.firebasestorage.app",messagingSenderId:"498344379382",appId:"1:498344379382:web:684c82f8f8ab7084a67dd7",measurementId:"G-NJD4T1QKKQ"}):(0,a.Dk)().length>0?(0,a.Dk)()[0]:null,c=l?(0,n.aU)(l):null;l&&(0,o.c7)(l);let i=l?(0,s.xI)(l):null},2570:(e,r,t)=>{Promise.resolve().then(t.bind(t,6856)),Promise.resolve().then(t.bind(t,650)),Promise.resolve().then(t.t.bind(t,9324,23)),Promise.resolve().then(t.t.bind(t,6874,23)),Promise.resolve().then(t.t.bind(t,7656,23))},2743:(e,r,t)=>{"use strict";t.d(r,{Ln:()=>p,Nj:()=>h,Nq:()=>f,a9:()=>c,gL:()=>i,h5:()=>y,nd:()=>u,x0:()=>w,xB:()=>d});var a=t(1304),n=t(5317);let o=()=>{if(!a.db)throw Error("Firestore가 초기화되지 않았습니다. 클라이언트 사이드에서만 이 함수를 호출해주세요.");return a.db},s=()=>{let e=o();return(0,n.rJ)(e,"videos")},l=()=>{let e=o();return(0,n.rJ)(e,"users")};async function c(e,r){try{let t=o(),a=(0,n.H9)(t,"users",e),s={...r,createdAt:(0,n.O5)(),updatedAt:(0,n.O5)()};return await (0,n.BN)(a,s),{uid:e,...s}}catch(e){throw console.error("사용자 데이터 생성 오류:",e),e}}async function i(e){try{let r=o(),t=(0,n.H9)(r,"users",e),a=await (0,n.x7)(t);if(a.exists())return{uid:a.id,...a.data()};return null}catch(e){throw console.error("사용자 데이터 불러오기 오류:",e),e}}async function u(e,r){try{let t=s(),a=(0,n.P)(t,(0,n._M)("levelId","==",e),(0,n._M)("quarterId","==",r),(0,n._M)("type","==","library")),o=await (0,n.GG)(a),l=[];return o.forEach(e=>{l.push({id:e.id,...e.data()})}),l.sort((e,r)=>e.title.localeCompare(r.title,"ko"))}catch(e){throw console.error("분기별 영상 불러오기 오류:",e),e}}async function d(e,r,t,a){try{let o=s(),l=(0,n.P)(o,(0,n._M)("levelId","==",e),(0,n._M)("quarterId","==",r),(0,n._M)("monthId","==",t),(0,n._M)("weekId","==",a),(0,n._M)("type","==","lesson")),c=await (0,n.GG)(l),i=[];return c.forEach(e=>{i.push({id:e.id,...e.data()})}),i.sort((e,r)=>e.title.localeCompare(r.title,"ko"))}catch(e){throw console.error("주차별 영상 불러오기 오류:",e),e}}async function h(e){try{let r=s(),t={...e,createdAt:(0,n.O5)(),updatedAt:(0,n.O5)()};return{id:(await (0,n.gS)(r,t)).id,...t}}catch(e){throw console.error("비디오 추가 오류:",e),e}}async function y(e,r){try{let t=o(),a=(0,n.H9)(t,"videos",e);return await (0,n.mZ)(a,{...r,updatedAt:(0,n.O5)()}),{id:e,...r}}catch(e){throw console.error("비디오 업데이트 오류:",e),e}}async function p(e){try{let r=o(),t=(0,n.H9)(r,"videos",e);return await (0,n.kd)(t),{success:!0,id:e}}catch(e){throw console.error("비디오 삭제 오류:",e),e}}async function w(){try{let e=l(),r=(0,n.P)(e,(0,n._M)("role","==","teacher"),(0,n.My)("createdAt","desc"));return(await (0,n.GG)(r)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("선생님 목록 가져오기 오류:",e),e}}async function f(e){try{let r=o(),t=(0,n.H9)(r,"users",e);await (0,n.kd)(t)}catch(e){throw console.error("사용자 데이터 삭제 오류:",e),e}}},6856:(e,r,t)=>{"use strict";t.d(r,{default:()=>l});var a=t(5155),n=t(6874),o=t.n(n),s=t(650);function l(){let{user:e,loading:r,isAdmin:t}=(0,s.A)();return r?null:e?t?(0,a.jsx)(o(),{href:"/admin",className:"py-2 px-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"관리자 페이지"}):null:(0,a.jsx)(o(),{href:"/login",className:"py-2 px-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"로그인"})}},7656:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_d65c78"}},9324:()=>{}},e=>{var r=r=>e(e.s=r);e.O(0,[721,992,118,288,874,441,684,358],()=>r(2570)),_N_E=e.O()}]);